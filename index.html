<!DOCTYPE html>
<html>
  <head>
    <title>Ergo | Endless Runner Game in Virtual Reality</title>
    <script src="./assets/0.7.0/aframe.min.js"></script>
    <script src="./assets/ocean.js"></script>
    <script src="./assets/runner.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alvinwan/aframe-low-poly@0.0.2/dist/aframe-low-poly.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="http://mirrorvr.alvinwan.com/mirrorvr.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Exo+2" rel="stylesheet">
    <link href="./assets/style.css" rel="stylesheet" />
  </head>
  <body>
    <a-scene fog="type: linear; color: #a3d0ed; near:5; far:20">

      <a-sky color="#a3d0ed"></a-sky>

      <!-- Mixins -->
      <a-assets>
        <a-mixin id="foliage" geometry="
            primitive: cone;
            segments-height: 1;
            segments-radial:4;
            radius-bottom:0.3;"
           material="color:white;flat-shading: true;"></a-mixin>
        <a-mixin id="trunk" geometry="
            primitive: box;
            height:0.5;
            width:0.1;
            depth:0.1;"
           material="color:white;"></a-mixin>
        <a-mixin id="title" text="
            font:exo2bold;
            height:40;
            width:40;
            opacity:0.75;
            anchor:center;
            align:center;"></a-mixin>
        <a-mixin id="copy" text="
            font:exo2bold;
            height:5;
            width:5;
            opacity:0.75;
            anchor:center;
            align:center;"></a-mixin>
        <a-mixin id="heading" text="
            font:exo2bold;
            height:10;
            width:10;
            opacity:0.75;
            anchor:center;
            align:center;"></a-mixin>
        <a-mixin id="text" text="
            font:exo2bold;
            anchor:center;
            align:center;"></a-mixin>
      </a-assets>

      <!-- Lights! -->
      <a-entity light="
          type: directional;
          castShadow: true;
          intensity: 0.4;
          color: #D0EAF9;"
        position="5 3 1"></a-entity>
      <a-light intensity="0.8" type="ambient" position="1 1 1" color="#B4C5EC"></a-light>

      <!-- Camera! -->
      <a-camera camera-listener onload-init-mirrorvr wasd-controls-enabled="false" lane-controls position="0 0 2.5">
          <a-entity id="cursor-mobile" cursor="fuse: true; fuseTimeout: 250"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: white; shader: flat"
                scale="0.5 0.5 0.5"
                raycaster="far: 50; interval: 1000; objects: .clickable">
          </a-entity>
      </a-camera>

      <!-- Action! -->
      <lp-cone class="iceberg" segments-radial="5" segments-height="3" height="1" amplitude-variance="0.25" radius-top="0.15" radius-bottom="0.5" position="3 -0.1 -1.5">
        <a-animation attribute="rotation" from="-5 0 0" to="5 0 0" repeat="indefinite" direction="alternate"></a-animation>
        <a-animation attribute="position" from="3 -0.2 -1.5" to="4 -0.2 -2.5" repeat="indefinite" direction="alternate" dur="12000" easing="linear"></a-animation>
      </lp-cone>

      <a-ocean depth="50" width="50" amplitude="0" amplitude-variance="0.1" speed="1.5" speed-variance="1" opacity="1" density="50"></a-ocean>
      <a-ocean depth="50" width="50" opacity="0.5" amplitude="0" amplitude-variance="0.15" speed="1.5" speed-variance="1" density="50"></a-ocean>

      <!-- Controladores VR (Meta Quest 3) -->
      <a-entity id="left-hand" laser-controls="hand: left" vr-button-controls></a-entity>
      <a-entity id="right-hand" laser-controls="hand: right" vr-button-controls></a-entity>

      <!-- Ãrboles y elementos interactivos -->
      <a-entity id="tree-container" position="0 .5 -1.5" rotation="-90 0 0">
        <a-entity mixin="foliage"></a-entity>
        <a-entity mixin="trunk" position="0 -0.5 0"></a-entity>
        <a-animation attribute="position" ease="linear" from="0 0.6 -7" to="0 0.6 1.5" dur="5000"></a-animation>
      </a-entity>

      <a-entity id="player" player>
        <a-sphere radius="0.05">
          <a-animation repeat="indefinite" direction="alternate" attribute="position" ease="ease-in-out" from="0 0.5 0.6" to="0 0.525 0.6"></a-animation>
          <a-animation repeat="indefinite" direction="alternate" attribute="radius" from="0.05" to="0.055" dur="1500"></a-animation>
          <a-light type="point" intensity="0.35" color="#FF440C">
            <a-animation repeat="indefinite" direction="alternate-reverse" attribute="intensity" ease="ease-in-out" from="0.35" to="0.5"></a-animation>
          </a-light>
        </a-sphere>
      </a-entity>
    </a-scene>
  </body>
</html>
